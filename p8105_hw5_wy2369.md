p8105_hw5_wy2369
================
Wenjing Yang
2022-11-13

# Problem 1

### Imports the data

The code chunk below imports the data in individual spreadsheets
contained in `./data/zip_data/`. To do this, I create a dataframe that
includes the list of all files in that directory and the complete path
to each file.

As a next step, I `map` over paths and import data using the `read_csv`
function. Finally, I `unnest` the result of `map`.

``` r
full_df = 
  tibble(
    files = list.files("data/zip_data/"),
    path = str_c("data/zip_data/", files)
  ) %>% 
  mutate(data = map(path, read_csv)) %>% 
  unnest()
```

    ## Rows: 1 Columns: 8
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl (8): week_1, week_2, week_3, week_4, week_5, week_6, week_7, week_8
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.
    ## Rows: 1 Columns: 8
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl (8): week_1, week_2, week_3, week_4, week_5, week_6, week_7, week_8
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.
    ## Rows: 1 Columns: 8
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl (8): week_1, week_2, week_3, week_4, week_5, week_6, week_7, week_8
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.
    ## Rows: 1 Columns: 8
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl (8): week_1, week_2, week_3, week_4, week_5, week_6, week_7, week_8
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.
    ## Rows: 1 Columns: 8
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl (8): week_1, week_2, week_3, week_4, week_5, week_6, week_7, week_8
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.
    ## Rows: 1 Columns: 8
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl (8): week_1, week_2, week_3, week_4, week_5, week_6, week_7, week_8
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.
    ## Rows: 1 Columns: 8
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl (8): week_1, week_2, week_3, week_4, week_5, week_6, week_7, week_8
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.
    ## Rows: 1 Columns: 8
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl (8): week_1, week_2, week_3, week_4, week_5, week_6, week_7, week_8
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.
    ## Rows: 1 Columns: 8
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl (8): week_1, week_2, week_3, week_4, week_5, week_6, week_7, week_8
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.
    ## Rows: 1 Columns: 8
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl (8): week_1, week_2, week_3, week_4, week_5, week_6, week_7, week_8
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.
    ## Rows: 1 Columns: 8
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl (8): week_1, week_2, week_3, week_4, week_5, week_6, week_7, week_8
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.
    ## Rows: 1 Columns: 8
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl (8): week_1, week_2, week_3, week_4, week_5, week_6, week_7, week_8
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.
    ## Rows: 1 Columns: 8
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl (8): week_1, week_2, week_3, week_4, week_5, week_6, week_7, week_8
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.
    ## Rows: 1 Columns: 8
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl (8): week_1, week_2, week_3, week_4, week_5, week_6, week_7, week_8
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.
    ## Rows: 1 Columns: 8
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl (8): week_1, week_2, week_3, week_4, week_5, week_6, week_7, week_8
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.
    ## Rows: 1 Columns: 8
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl (8): week_1, week_2, week_3, week_4, week_5, week_6, week_7, week_8
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.
    ## Rows: 1 Columns: 8
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl (8): week_1, week_2, week_3, week_4, week_5, week_6, week_7, week_8
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.
    ## Rows: 1 Columns: 8
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl (8): week_1, week_2, week_3, week_4, week_5, week_6, week_7, week_8
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.
    ## Rows: 1 Columns: 8
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl (8): week_1, week_2, week_3, week_4, week_5, week_6, week_7, week_8
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.
    ## Rows: 1 Columns: 8
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl (8): week_1, week_2, week_3, week_4, week_5, week_6, week_7, week_8
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

    ## Warning: `cols` is now required when using unnest().
    ## Please use `cols = c(data)`

# Problem 2

### Read and clean

Using the code chunk to read and clean data from `homicide-data.csv`

``` r
homicide_data = 
  read_csv("./data/homicide-data.csv") %>% 
  janitor::clean_names()
```

    ## Rows: 52179 Columns: 12
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (9): uid, victim_last, victim_first, victim_race, victim_age, victim_sex...
    ## dbl (3): reported_date, lat, lon
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

### Describe the raw data

In the raw data, there are **52179** rows and **12** columns. It
contains **12** important variables which are uid (`uid`), dates of
report (`reported_date`), last and first names of victim
(`victim_last`and `victim_first`), race of victim (`victim_race`), age
of victim (`victim_age`), sex of victim (`victim_sex`), variables of
location (`city`, `state`, `lat` and `lon` ), and the status of case
(`disposition`) from 50 large cities in the U.S.

### Create a `city_state` variable

Using mutate function to create a new variable.

``` r
homicide_df = 
  homicide_data %>% 
  mutate(city_state = str_c(city, ",", state)) 
```

### Find the total number of homicides within cities.

``` r
homicide_df %>% 
  group_by(city_state) %>% 
  count(city_state) %>% 
  summarize(n) %>%
  knitr::kable()
```

| city_state        |    n |
|:------------------|-----:|
| Albuquerque,NM    |  378 |
| Atlanta,GA        |  973 |
| Baltimore,MD      | 2827 |
| Baton Rouge,LA    |  424 |
| Birmingham,AL     |  800 |
| Boston,MA         |  614 |
| Buffalo,NY        |  521 |
| Charlotte,NC      |  687 |
| Chicago,IL        | 5535 |
| Cincinnati,OH     |  694 |
| Columbus,OH       | 1084 |
| Dallas,TX         | 1567 |
| Denver,CO         |  312 |
| Detroit,MI        | 2519 |
| Durham,NC         |  276 |
| Fort Worth,TX     |  549 |
| Fresno,CA         |  487 |
| Houston,TX        | 2942 |
| Indianapolis,IN   | 1322 |
| Jacksonville,FL   | 1168 |
| Kansas City,MO    | 1190 |
| Las Vegas,NV      | 1381 |
| Long Beach,CA     |  378 |
| Los Angeles,CA    | 2257 |
| Louisville,KY     |  576 |
| Memphis,TN        | 1514 |
| Miami,FL          |  744 |
| Milwaukee,wI      | 1115 |
| Minneapolis,MN    |  366 |
| Nashville,TN      |  767 |
| New Orleans,LA    | 1434 |
| New York,NY       |  627 |
| Oakland,CA        |  947 |
| Oklahoma City,OK  |  672 |
| Omaha,NE          |  409 |
| Philadelphia,PA   | 3037 |
| Phoenix,AZ        |  914 |
| Pittsburgh,PA     |  631 |
| Richmond,VA       |  429 |
| Sacramento,CA     |  376 |
| San Antonio,TX    |  833 |
| San Bernardino,CA |  275 |
| San Diego,CA      |  461 |
| San Francisco,CA  |  663 |
| Savannah,GA       |  246 |
| St. Louis,MO      | 1677 |
| Stockton,CA       |  444 |
| Tampa,FL          |  208 |
| Tulsa,AL          |    1 |
| Tulsa,OK          |  583 |
| Washington,DC     | 1345 |

From this table, we could find the total number of homicides within 51
cities not 50, and there is one uncommon data from **Tulsa,AL**. Since I
know **Tulsa,AL** does not exist in the U.S, we should probably ignore
this data from `homicide_df` dataset.

### Find the number of unsolved homicides

``` r
tidy_homicide_df = 
  homicide_df %>% 
  filter(city_state != "Tulsa,AL") %>% 
  mutate(
    homicide_status =  ifelse(disposition != "Closed by arrest", "unsolved", "solved")
  )

tidy_homicide_df %>% 
  group_by(city_state) %>% 
  summarize(
    unsolved = sum(homicide_status == "unsolved"),
    total_homicides = n()) %>% 
  knitr::kable()
```

| city_state        | unsolved | total_homicides |
|:------------------|---------:|----------------:|
| Albuquerque,NM    |      146 |             378 |
| Atlanta,GA        |      373 |             973 |
| Baltimore,MD      |     1825 |            2827 |
| Baton Rouge,LA    |      196 |             424 |
| Birmingham,AL     |      347 |             800 |
| Boston,MA         |      310 |             614 |
| Buffalo,NY        |      319 |             521 |
| Charlotte,NC      |      206 |             687 |
| Chicago,IL        |     4073 |            5535 |
| Cincinnati,OH     |      309 |             694 |
| Columbus,OH       |      575 |            1084 |
| Dallas,TX         |      754 |            1567 |
| Denver,CO         |      169 |             312 |
| Detroit,MI        |     1482 |            2519 |
| Durham,NC         |      101 |             276 |
| Fort Worth,TX     |      255 |             549 |
| Fresno,CA         |      169 |             487 |
| Houston,TX        |     1493 |            2942 |
| Indianapolis,IN   |      594 |            1322 |
| Jacksonville,FL   |      597 |            1168 |
| Kansas City,MO    |      486 |            1190 |
| Las Vegas,NV      |      572 |            1381 |
| Long Beach,CA     |      156 |             378 |
| Los Angeles,CA    |     1106 |            2257 |
| Louisville,KY     |      261 |             576 |
| Memphis,TN        |      483 |            1514 |
| Miami,FL          |      450 |             744 |
| Milwaukee,wI      |      403 |            1115 |
| Minneapolis,MN    |      187 |             366 |
| Nashville,TN      |      278 |             767 |
| New Orleans,LA    |      930 |            1434 |
| New York,NY       |      243 |             627 |
| Oakland,CA        |      508 |             947 |
| Oklahoma City,OK  |      326 |             672 |
| Omaha,NE          |      169 |             409 |
| Philadelphia,PA   |     1360 |            3037 |
| Phoenix,AZ        |      504 |             914 |
| Pittsburgh,PA     |      337 |             631 |
| Richmond,VA       |      113 |             429 |
| Sacramento,CA     |      139 |             376 |
| San Antonio,TX    |      357 |             833 |
| San Bernardino,CA |      170 |             275 |
| San Diego,CA      |      175 |             461 |
| San Francisco,CA  |      336 |             663 |
| Savannah,GA       |      115 |             246 |
| St. Louis,MO      |      905 |            1677 |
| Stockton,CA       |      266 |             444 |
| Tampa,FL          |       95 |             208 |
| Tulsa,OK          |      193 |             583 |
| Washington,DC     |      589 |            1345 |

From this table, we could find the number of unsolved homicides (those
for which the disposition is “Closed without arrest” or “Open/No
arrest”).

### Use the `prop.test` function to estimate the proportion of homicides that are unsolved
